<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hospital Dashboard - LifeLink</title>
    <link rel="icon" type="image/ico" sizes="180x180" href="/uploads/favicon.ico">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
:root {
  --bg: #f6f8fb;
  --card-bg: #ffffff;
  --border-light: #e5e7eb;

  --text-main: #111827;
  --text-muted: #6b7280;
  --color-primary-dark: #be123c;

  --primary: #2563eb;
  --primary-soft: #eff6ff;
}




        * {
            box-sizing: border-box;
        }
/* ===============================
   LIGHT MEDICAL DASHBOARD THEME
   (CSS ONLY – Thymeleaf untouched)
================================ */

/* Global background */
body {
  font-family: 'Inter', sans-serif;
  background: #f6f8fb !important;
  color: #111827 !important;
}

/* Remove dark overlays */
body::before {
  display: none !important;
}

        /* Base navbar */
.navbar {
    background: #ffffff;
    padding: 0.1rem 1rem;
    border-bottom: 0.75px solid #e5e7eb;
    border-shadow: 0 2px 4px rgba(0,0,0,0.05);
    position:sticky;
}

.navbar-brand {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-weight: 700;
    font-size: 1.25rem;
    color: #e11d48;
}

.navbar-brand img {
    height: 34px;
}

/* Right-side user block */
.navbar-nav {
    display: flex;
    align-items: center;
}

.nav-item.dropdown {
    display: flex;
    align-items: center;
}

/* Avatar + username inline */
.nav-link {
    display: flex !important;
    align-items: center;
    gap: 0.6rem;
    padding: 0.25rem 0.75rem;
}

.profile-avatar {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid #e5e7eb;
}

.nav-item .fw-medium {
    font-size: 0.95rem;
    font-weight: 500;
    color: #111827;
    white-space: nowrap;
}

/* ===============================
   MOBILE FIX (IMPORTANT)
=============================== */
@media (max-width: 991px) {

    /* Keep navbar one-line */
    .navbar > .container {
        display: flex;
        align-items: center;
        justify-content: space-between;
    }

    /* Disable center stacking */
    .navbar-collapse {
        position: absolute;
        top: 100%;
        right: 1rem;
        width: auto;
        background: #ffffff;
        padding: 0.75rem;
        border-radius: 12px;
        box-shadow: 0 15px 40px rgba(0,0,0,0.15);
    }

    /* Dropdown avatar stays inline */
    .navbar-nav {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.5rem;
    }

    .nav-link {
        flex-direction: row !important;
        justify-content: flex-start;
        width: 100%;
    }

    .profile-avatar {
        width: 32px;
        height: 32px;
    }
}

/* ===============================
   DROPDOWN MENU POLISH
=============================== */
.dropdown-menu {
    border-radius: 12px;
    border: 1px solid #e5e7eb;
    border:none;
    padding: 0.5rem;
}

.dropdown-item {
    border-radius: 8px;
    font-size: 0.9rem;
}

.dropdown-item:hover {
    background: #f1f5f9;
}


/* ===============================
   MATERIAL UI STYLE DROPDOWN
=============================== */

.dropdown-menu {
    border-radius: 14px;
    border: 1px solid #e5e7eb;
    box-shadow: 0 20px 45px rgba(0,0,0,0.12);
    padding: 0.5rem;
    background: #ffffff;
}

/* Username (top text) */
.dropdown-item-text {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    font-weight: 600;
    font-size: 0.9rem;
    color: #111827;
    padding: 0.75rem;
}

/* All dropdown items */
.dropdown-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    font-weight: 500; /* semi-bold */
    font-size: 0.9rem;
    color: #374151;
    border-radius: 10px;
    padding: 0.6rem 0.75rem;
    transition: background 0.2s ease, transform 0.15s ease;
}

/* Material hover */
.dropdown-item:hover {
    background: #f3f4f6;
    transform: translateX(2px);
}

/* ICON CIRCLE (Material style) */
.dropdown-item i,
.dropdown-item-text i {
    width: 34px;
    height: 34px;
    border-radius: 50%;
    background: #f1f5f9;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: 0.95rem;
    color: #374151;

    /* IMPORTANT: no stroke / no border */
    border: none;
    box-shadow: none;
}

/* Accent colors per action */
.dropdown-item i.fa-user {
    background: #e0f2fe;
    color: #0369a1;
}

.dropdown-item i.fa-gear {
    background: #ede9fe;
    color: black;
}

.dropdown-item i.fa-right-from-bracket {
    background: #fee2e2;
    color: #b91c1c;
}


/* Main container card */
.glass-card {
  background: #ffffff !important;
  border-radius: 16px !important;
  border: 1px solid #e5e7eb !important;
  box-shadow: 0 2px 8px rgba(0,0,0,0.04) !important;
  backdrop-filter: none !important;
}

/* ===============================
   STAT CARDS
================================ */





.stat-card h3 {
  margin-bottom: 4px;
}

.stat-card p {
  margin-bottom: 0;
}


.stat-card {
  background: #ffffff !important;
  border: 1px solid #e5e7eb !important;
  border-radius: 16px !important;
  box-shadow: 0 2px 6px rgba(0,0,0,0.04) !important;
  text-align: left !important;
    padding: 24px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  height: 100%;
}

.stat-card:hover {
  transform: none !important;
}

/* Icon style */
.stat-icon {
  width: 44px !important;
  height: 44px !important;
  border-radius: 50% !important;
  background: #eff6ff !important;
  color: #2563eb !important;
  font-size: 1.1rem !important;
  box-shadow: none !important;

  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 16px;
}

/* Numbers */
.stat-card h3 {

  font-size: 1.85rem !important;
  font-weight: 700 !important;
  letter-spacing: -0.02em;
}

/* Labels */
.stat-card p {


   font-size: 0.85rem !important;
  font-weight: 500;
  color: #6b7280 !important;
  margin-top: 2px;
}

/* ===============================
   DATA CARDS (TABLE SECTIONS)
================================ */
.data-card {
  background: #ffffff !important;
  border-radius: 16px !important;
  border: 1px solid #e5e7eb !important;
  box-shadow: 0 2px 8px rgba(0,0,0,0.04) !important;
}

/* Header */
.data-card-header {
  background: transparent !important;
  color: #111827 !important;
  font-weight: 600 !important;
  border-bottom: 1px solid #e5e7eb !important;
   padding: 16px 24px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  letter-spacing: 0.01em;
}
.data-card-header i {
  margin-right: 8px;
}
 .bg-light {

     color:gray;
    --bs-bg-opacity: 3;
    background-color: rgba(var(--bs-light-rgb), var(--bs-bg-opacity)) !important;
}


//data card badge id
#data-card-badge{
   padding: 6px 6px;
    border-radius: 2px;
    color:gray;
    --bs-bg-opacity: 3;
    background-color: rgba(var(--bs-light-rgb), var(--bs-bg-opacity)) !important;
}
/* ===============================
   TABLE
================================ */
.table {
  color: #111827 !important;
}
.table th,
.table td {
  vertical-align: middle !important;
}
.table tbody td:first-child {
  font-weight: 600;
  color: #111827;
}


.table td:last-child {
  white-space: nowrap;
}

.btn-action {
  padding: 6px 14px;
  font-size: 0.85rem;
}


.table thead th {
  background: transparent !important;

  color: #6b7280 !important;
  border-bottom: 1px solid #e5e7eb !important;
  font-size: 0.72rem !important;
  font-weight: 600;
  letter-spacing: 0.06em;
  text-transform: uppercase;
}

.table tbody td {
  font-size: 0.9rem !important;
  border-bottom: 1px solid #f1f5f9 !important;

  font-weight: 400;
}

.table-hover tbody tr:hover {
  background: #f9fafb !important;
  transform: none !important;
}

/* ===============================
   STATUS BADGES
================================ */
.status-badge {
  background: #f1f5f9 !important;
  color: #374151 !important;
  border: 1px solid #e5e7eb !important;
  font-size: 0.75rem !important;
  padding: 4px 10px;
  border-radius: 999px;
  font-weight: 500;
  display: inline-block;
}
.empty-state {
  padding: 80px 20px;
}
.empty-state h2 {
  font-size: 1.8rem;
  font-weight: 700;
}
.empty-state i {
  font-size: 3rem;
  color: #2563eb;
  margin-bottom: 16px;
}
p {
  line-height: 1.6;
}
.mui-header {
  background: #ffffff !important;
  border: 1px solid #e5e7eb; /* secondary border */
  border-radius: 14px 14px 0 0;
  padding: 16px 20px;

  display: flex;
  align-items: center;
  justify-content: space-between;

  font-weight: 600;
  color: #111827;
}

/* Material-style icon */
.mui-icon {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: #eff6ff; /* soft blue */
  color: #2563eb;

  display: flex;
  align-items: center;
  justify-content: center;

  font-size: 0.95rem;
}

.mui-header {
  box-shadow: 0 1px 2px rgba(0,0,0,0.04);
}


/* ===============================
   BUTTONS
================================ */
.btn-approve {
  background: #2563eb !important;
  color: #ffffff !important;
  box-shadow: none !important;
}

.btn-reject {
  background: red;
  color: #ffffff !important;
  box-shadow: none !important;
}

.btn-action:hover {
  opacity: 0.9 !important;
  transform: none !important;
}

/* ===============================
   FOOTER
================================ */
/* ================= FOOTER ================= */
/* ================= FOOTER ================= */
footer {
    background:#1e40af;
    color: var(--color-light);
    padding: var(--space-lg) 0;
    text-align: center;
}

footer a {
    color: white;
    text-decoration: none;
}

footer a:hover {
    text-decoration: underline;
}

/* Mobile spacing */
@media (max-width: 576px) {
    footer {
        padding: 2rem 1rem;
    }

    footer p {
        font-size: 0.85rem;
    }
}


/* Mobile spacing */
@media (max-width: 576px) {
    footer {
        padding: 2rem 1rem;
    }

    footer p {
        font-size: 0.85rem;
    }
}


    </style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg">
    <div class="container">
        <a class="navbar-brand" href="/">
            <img src="/uploads/LifelineLogo.png" alt="LifeLink Logo"/>
            <span th:text="${username}" class="text-primary-dark fw-semibold ">Hospital Dashboard</span>
        </a>
        <button class="navbar-toggler border-0 p-2" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <i class="fas fa-bars text-primary fs-4"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto align-items-center">
                <li class="nav-item profile-dropdown ms-3">
                    <a class="nav-link d-flex flex-column align-items-center p-0" href="#" role="button" data-bs-toggle="dropdown" style="width: 60px;">
                        <img th:src="@{${profilePicUrl}}" alt="Profile" class="profile-avatar mb-1"
                             onerror="this.src='/uploads/blank_profile.jpg'"/>
                        <span th:text="${username}" class="fw-semibold text-truncate" style="font-size: 0.875rem; max-width: 100px;">Username</span>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end">
                        <li><a th:href="@{/logout}" class="dropdown-item">
                            <i class="fas fa-right-from-bracket me-2"></i>Sign Out
                        </a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>

<div class="container-fluid mt-5 px-4">
    <div class="glass-card p-4 p-lg-5">
        <!-- STATS -->
        <div class="row g-4 mb-5">
            <div class="col-lg-3 col-md-6">
                <div class="stat-card h-100">
                    <div class="stat-icon bg-gradient-danger text-white mb-4">
                        <i class="fas fa-tint" style="color:red;"></i>
                    </div>
                    <h3 class="fw-bold mb-1" th:text="${totalBloodDonors}">0</h3>
                    <p class="text-secondary fs-5 mb-0" >Blood Donors</p>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="stat-card h-100">
                    <div class="stat-icon bg-gradient-info text-white mb-4">
                        <i class="fas fa-heart text-primary"></i>
                    </div>
                    <h3 class="fw-bold mb-1" th:text="${totalOrganDonors}">0</h3>
                    <p class="text-secondary fs-5 mb-0 ">Organ Donors</p>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="stat-card h-100">
                    <div class="stat-icon bg-gradient-warning text-white mb-4">
                        <i class="fas fa-clock text-warning"></i>
                    </div>
                    <h3 class="fw-bold mb-1" th:text="${pendingFreeDonors != null ? pendingFreeDonors.size() : 0}">0</h3>
                    <p class="text-secondary fs-5 mb-0">Pending FREE</p>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="stat-card h-100">
                    <div class="stat-icon bg-gradient-danger text-white mb-4">
                        <i class="fas fa-credit-card text-dark"></i>
                    </div>
                    <h3 class="fw-bold mb-1" th:text="${pendingPaidDonors != null ? pendingPaidDonors.size() : 0}">0</h3>
                    <p class="text-secondary fs-5 mb-0">Pending PAID</p>
                </div>
            </div>
        </div>

        <!-- PENDING FREE -->
        <div class="data-card mb-5" th:if="${pendingFreeDonors != null and !pendingFreeDonors.isEmpty()}">
            <div class="data-card-header">
                <span>
                <i class="fas fa-clock me-2"></i>
                Pending FREE Donors
                </span>
                <span class="badge bg-light fs-6 ms-2" th:text="${pendingFreeDonors.size()}">0</span>
            </div>
            <div class="table-responsive">
                <table class="table table-hover mb-0">
                    <thead>
                    <tr>
                        <th><i class="fas fa-user me-2"></i>Name</th>
                        <th><i class="fas fa-phone me-2"></i>Phone</th>
                        <th><i class="fas fa-info-circle me-2"></i>Type</th>
                        <th><i class="fas fa-cogs me-2"></i>Action</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="donor : ${pendingFreeDonors}">
                        <td class="fw-semibold" th:text="${donor.name}">John Doe</td>
                        <td>
                            <i class="fas fa-phone text-success me-2"></i>
                            <span th:text="${donor.contact}">+977...</span>
                        </td>
                        <td>
                            <span class="status-badge type-blood" th:if="${donor.type == 'BLOOD'}"> BLOOD</span>
                            <span class="status-badge type-organ" th:if="${donor.type == 'ORGAN'}"> ORGAN</span>
                        </td>
                        <td>
                            <form th:action="@{/hospital/donor/approve(donorId=${donor.id}, donorType=${donor.type})}" method="post" class="d-inline me-2">
                                <button type="submit" class="btn btn-action btn-approve">
                                    <i class="fas fa-check me-1"></i>APPROVE
                                </button>
                            </form>
                            <form th:action="@{/hospital/donor/remove(donorId=${donor.id}, donorType=${donor.type})}" method="post" class="d-inline">
                                <button type="submit" class="btn btn-action btn-reject" onclick="return confirm('Are you sure you want to reject this donor?')">
                                    <i class="fas fa-times me-1"></i>REJECT
                                </button>
                            </form>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- PENDING PAID -->
        <div class="data-card mb-5" th:if="${pendingPaidDonors != null and !pendingPaidDonors.isEmpty()}">
            <div class="data-card-header mui-header" style="background: var(--warning-gradient);">
                <span>

            <i class="fas fa-credit-card"></i>

        Pending PAID Donors
    </span>

                   
                <span class="badge bg-light fs-6 ms-2" th:text="${pendingPaidDonors.size()}">0</span>
            </div>
            <div class="table-responsive">
                <table class="table table-hover mb-0">
                    <thead>
                    <tr>
                        <th><i class="fas fa-user me-2"></i>Name</th>
                        <th><i class="fas fa-phone me-2"></i>Phone</th>
                        <th><i class="fas fa-info-circle me-2"></i>Type</th>
                        <th><i class="fas fa-cogs me-2"></i>Action</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="donor : ${pendingPaidDonors}">
                        <td class="fw-semibold" th:text="${donor.name}">John Doe</td>
                        <td>
                            <i class="fas fa-phone text-success me-2"></i>
                            <span th:text="${donor.contact}">+977...</span>
                        </td>
                        <td>
                            <span class="status-badge type-blood" th:if="${donor.type == 'BLOOD'}"> BLOOD</span>
                            <span class="status-badge type-organ" th:if="${donor.type == 'ORGAN'}"> ORGAN</span>
                        </td>
                        <td>
                            <form th:action="@{/hospital/donor/approve(donorId=${donor.id}, donorType=${donor.type})}" method="post" class="d-inline me-2">
                                <button type="submit" class="btn btn-action btn-approve">
                                    <i class="fas fa-check me-1"></i>APPROVE
                                </button>
                            </form>
                            <form th:action="@{/hospital/donor/remove(donorId=${donor.id}, donorType=${donor.type})}" method="post" class="d-inline">
                                <button type="submit" class="btn btn-action btn-reject" onclick="return confirm('Are you sure you want to reject this donor?')">
                                    <i class="fas fa-times me-1"></i>REJECT
                                </button>
                            </form>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- APPROVED BLOOD -->
        <div class="data-card mb-5" th:if="${approvedBloodDonors != null and !approvedBloodDonors.isEmpty()}">
            <div class="data-card-header" style="background: var(--danger-gradient);">
               <span>
                <i class="fas fa-tint me-2"></i>
                Approved Blood Donors
               </span>
                <span class="badge bg-light fs-6 ms-2" th:text="${approvedBloodDonors.size()}">0</span>
            </div>
            <div class="table-responsive">
                <table class="table table-hover mb-0">
                    <thead>
                    <tr>
                        <th><i class="fas fa-user me-2"></i>Name</th>
                        <th><i class="fas fa-phone me-2"></i>Phone</th>
                        <th><i class="fas fa-tint me-2"></i>Blood Group</th>
                        <th><i class="fas fa-tag me-2"></i>Type</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="donor : ${approvedBloodDonors}">
                        <td th:text="${donor.name}">John Doe</td>
                        <td th:text="${donor.contact}">+977...</td>
                        <td><span class="badge bg-primary" th:text="${donor.bloodGroup}">A+</span></td>
                        <td>
                            <span class="status-badge type-free" th:if="${donor.donationType.name() == 'FREE'}">FREE</span>
                            <span class="status-badge type-paid" th:unless="${donor.donationType.name() == 'FREE'}">PAID</span>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- APPROVED ORGAN -->
        <div class="data-card" th:if="${approvedOrganDonors != null and !approvedOrganDonors.isEmpty()}">
            <div class="data-card-header" style="background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);">
                <span>
                <i class="fas fa-heart me-2"></i>
                Approved Organ Donors
                </span>
                <span class="badge bg-light fs-6 ms-2" th:text="${approvedOrganDonors.size()}">0</span>
            </div>
            <div class="table-responsive">
                <table class="table table-hover mb-0">
                    <thead>
                    <tr>
                        <th><i class="fas fa-user me-2"></i>Name</th>
                        <th><i class="fas fa-phone me-2"></i>Phone</th>
                        <th><i class="fas fa-lungs me-2"></i>Organ</th>
                        <th><i class="fas fa-tag me-2"></i>Type</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="donor : ${approvedOrganDonors}">
                        <td th:text="${donor.name}">John Doe</td>
                        <td th:text="${donor.contact}">+977...</td>
                        <td><span class="badge bg-info" th:text="${donor.organType}">Kidney</span></td>
                        <td>
                            <span class="status-badge type-free" th:if="${donor.donationType.name() == 'FREE'}">FREE</span>
                            <span class="status-badge type-paid" th:unless="${donor.donationType.name() == 'FREE'}">PAID</span>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- EMPTY STATE -->
        <div th:if="${(pendingFreeDonors == null or pendingFreeDonors.isEmpty()) and (pendingPaidDonors == null or pendingPaidDonors.isEmpty()) and (approvedBloodDonors == null or approvedBloodDonors.isEmpty()) and (approvedOrganDonors == null or approvedOrganDonors.isEmpty())}"
             class="empty-state text-center">
            <i class="fas fa-hospital"></i>
            <h2 class="display-4 fw-bold mb-3">No Donors Yet</h2>
            <p class="lead text-secondary mb-4">Waiting for donations assigned to this hospital</p>
            <div class="text-muted">
                <i class="fas fa-spinner fa-spin me-2"></i>
                New donors will appear here automatically
            </div>
        </div>
    </div>
</div>


    <footer class="text-center py-5 mt-5">
        <div class="container">
            <p class="mb-2 fs-5 fw-semibold text-white">
                © <span th:text="${#dates.format(#dates.createNow(), 'yyyy')}">2025</span> LifeLink
            </p>
            <p class="mb-0 text-light">
                <i class="fas fa-envelope me-2"></i>
                <a href="mailto:info@lifelink.com" class="text-decoration-none">info@lifelink.com</a> |
                <i class="fas fa-phone me-2 ms-3"></i>+977 9800000000
            </p>
        </div>
    </footer>



<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/js/bootstrap.bundle.min.js"></script>
</body>
</html>